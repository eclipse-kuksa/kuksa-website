<!DOCTYPE html>
<html lang="en-us">

  <head>
    <meta charset="utf-8">
<meta name="robots" content="all,follow">
<meta name="googlebot" content="index,follow,snippet,archive">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title></title>
<meta name="author" content="Admin" />




<meta name="keywords" content="iot, smart mobility, kuksa, appstacle, SDV, SOAFEE">


<meta name="description" content="Eclipse KUKSA community website">

<meta name="generator" content="Hugo 0.103.1" />


<link href='//fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,500,700,800' rel='stylesheet' type='text/css'>


<link rel="stylesheet" href="//use.fontawesome.com/releases/v5.11.2/css/all.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link href="/kuksa-website/css/animate.css" rel="stylesheet">



  <link href="/kuksa-website/css/style.turquoise.css" rel="stylesheet" id="theme-stylesheet">



<link href="/kuksa-website/css/custom.css?1710920600" rel="stylesheet">



  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->



<link rel="shortcut icon" href="/kuksa-website/img/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="/kuksa-website/img/apple-touch-icon.png" />


<link href="/kuksa-website/css/owl.carousel.css" rel="stylesheet">
<link href="/kuksa-website/css/owl.theme.css" rel="stylesheet">


<link rel="alternate" href="https://eclipse-kuksa.github.io/index.xml" type="application/rss+xml" title="Eclipse KUKSA">











<meta name="twitter:card" content="summary">

<meta name="twitter:title" content="">

<meta name="twitter:description" content="Eclipse KUKSA community website">


    
  </head>

  <body>

    <div id="all">
        


        <header class="navbar-affixed-top" data-spy="affix" data-offset-top="62">
    <div class="navbar navbar-default yamm " role="navigation" id="navbar">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand home" href="/kuksa-website/">
                    
                      <img src="/kuksa-website/img/kuksa-logo-h-209x79.png" alt=" logo" class="hidden-xs hidden-sm" />
                      <img src="/kuksa-website/img/kuksa-logo-h-209x79.png" alt=" logo" class="visible-xs visible-sm" />
                    
                    <span class="sr-only"> - go to homepage</span>
                </a>
                <div class="navbar-buttons">
                    <button type="button" class="navbar-toggle btn-template-main" data-toggle="collapse" data-target="#navigation">
                      <span class="sr-only">Toggle Navigation</span>
                        <i class="fas fa-align-justify"></i>
                    </button>
                </div>
            </div>
            

            <div class="navbar-collapse collapse" id="navigation">
                <ul class="nav navbar-nav navbar-right">
                  

                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/kuksa-website/">Home</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/kuksa-website/about/">Vision</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/kuksa-website/quickstart">Quickstart</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/kuksa-website/blog/">Blog</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/kuksa-website/publications/">Videos &amp; Publications</a>
                  </li>
                  
                  
                  
                  

                  

                  

                  

                  
                  <li class="dropdown ">
                    <a href="/kuksa-website/resources/">Resources</a>
                  </li>
                  
                  
                </ul>
            </div>
            

            <div class="collapse clearfix" id="search">
                <form class="navbar-form" role="search">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="Search">
                        <span class="input-group-btn">
                    <button type="submit" class="btn btn-template-main"><i class="fas fa-search"></i></button>
                </span>
                    </div>
                </form>
            </div>
            
        </div>
    </div>
</header>




        <div id="heading-breadcrumbs">
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <h1></h1>
            </div>
        </div>
    </div>
</div>


        <div id="content">
            

            <div class="container">

                <div class="row">

                    <div class="col-md-12">

                        <div>
                          <h1 id="kuksaval-quickstart">KUKSA.val Quickstart</h1>
<p>The quickest possible way to get KUKSA.val up and running</p>
<p><em>Note: The examples in this document do not use TLS or access control.</em></p>
<h2 id="starting-broker">Starting broker</h2>
<p>First we want to run KUKSA.val databroker</p>
<pre tabindex="0"><code>docker run -it --rm --net=host ghcr.io/eclipse/kuksa.val/databroker:master --insecure
</code></pre><h2 id="reading-and-writing-vss-data-via-cli">Reading and Writing VSS data via CLI</h2>
<p>You can interact with the VSS datapoints using the cli clients. The first option is databroker-cli.</p>
<p>This is, how you start it:</p>
<pre tabindex="0"><code>docker run -it --rm --net=host ghcr.io/eclipse/kuksa.val/databroker-cli:master
</code></pre><p>Here is how you can use it:</p>
<pre tabindex="0"><code>client&gt; get Vehicle.Speed
-&gt; Vehicle.Speed: ( NotAvailable )
client&gt; feed Vehicle.Speed 200
-&gt; Ok
client&gt; get Vehicle.Speed
-&gt; Vehicle.Speed: 200.00
client&gt; quit
Bye bye!
</code></pre><p>An alternative is the kuksa-client CLI (based on our Python client library).</p>
<p>Here is how you start it:</p>
<pre tabindex="0"><code>docker run -it --rm --net=host ghcr.io/eclipse-kuksa/kuksa-python-sdk/kuksa-client:main
</code></pre><p>Here is how you can use it:</p>
<pre tabindex="0"><code>Test Client&gt; getValue Vehicle.Speed
{
    &#34;path&#34;: &#34;Vehicle.Speed&#34;
}

Test Client&gt; setValue Vehicle.Speed 200
OK

Test Client&gt; getValue Vehicle.Speed
{
    &#34;path&#34;: &#34;Vehicle.Speed&#34;,
    &#34;value&#34;: {
        &#34;value&#34;: 200.0,
        &#34;timestamp&#34;: &#34;2023-01-16T12:43:57.305350+00:00&#34;
    }
}

Test Client&gt; quit
gRPC channel disconnected.
</code></pre><h2 id="reading-and-writing-vss-data-with-code">Reading and Writing VSS data with code</h2>
<p>To realize your ideas with KUKSA.val you need to write programs that interact with its API. The easiest way to achieve this is using our Python library.</p>
<h3 id="generating-data">Generating data</h3>
<p>Create a file <code>speed_provider.py</code> with the following content</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> kuksa_client.grpc <span style="color:#f92672">import</span> VSSClient
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> kuksa_client.grpc <span style="color:#f92672">import</span> Datapoint
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">import</span> time
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> VSSClient(<span style="color:#e6db74">&#39;127.0.0.1&#39;</span>, <span style="color:#ae81ff">55555</span>) <span style="color:#66d9ef">as</span> client:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> speed <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">0</span>,<span style="color:#ae81ff">100</span>):
</span></span><span style="display:flex;"><span>        client<span style="color:#f92672">.</span>set_current_values({
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;Vehicle.Speed&#39;</span>: Datapoint(speed),
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Feeding Vehicle.Speed to </span><span style="color:#e6db74">{</span>speed<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span><span style="display:flex;"><span>        time<span style="color:#f92672">.</span>sleep(<span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#34;Finished.&#34;</span>)
</span></span></code></pre></div><p>Do a <code>pip install kuksa-client</code> and start with</p>
<pre tabindex="0"><code>python ./speed_provider.py
</code></pre><h3 id="subscribing-data">Subscribing data:</h3>
<p>Create a file <code>speed_subscriber.py</code> with the following content</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">from</span> kuksa_client.grpc <span style="color:#f92672">import</span> VSSClient
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> VSSClient(<span style="color:#e6db74">&#39;127.0.0.1&#39;</span>, <span style="color:#ae81ff">55555</span>) <span style="color:#66d9ef">as</span> client:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> updates <span style="color:#f92672">in</span> client<span style="color:#f92672">.</span>subscribe_current_values([
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;Vehicle.Speed&#39;</span>,
</span></span><span style="display:flex;"><span>    ]):
</span></span><span style="display:flex;"><span>        speed <span style="color:#f92672">=</span> updates[<span style="color:#e6db74">&#39;Vehicle.Speed&#39;</span>]<span style="color:#f92672">.</span>value
</span></span><span style="display:flex;"><span>        print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#34;Received updated speed: </span><span style="color:#e6db74">{</span>speed<span style="color:#e6db74">}</span><span style="color:#e6db74">&#34;</span>)
</span></span></code></pre></div><p>Do a <code>pip install kuksa-client</code> and start with</p>
<pre tabindex="0"><code>python ./speed_subscriber.py
</code></pre><h2 id="faq--notes">FAQ &amp; Notes</h2>
<p>Frequently anticipated questions and tips.</p>
<h3 id="this-is-not-working-on-os-x">This is not working on OS X</h3>
<p>Unfortunately OS X has a bug that does not allow you to use the Databroker default port 55555. To change when starting the server:</p>
<pre tabindex="0"><code>docker run -it --rm --net=host ghcr.io/eclipse/kuksa.val/databroker:master  --port 55556 --insecure
</code></pre><p>Using the databroker-cli</p>
<pre tabindex="0"><code>docker run -it --rm --net=host -e KUKSA_DATA_BROKER_PORT=55556 ghcr.io/eclipse/kuksa.val/databroker-cli:master
</code></pre><p>Using kuksa-client CLI</p>
<pre tabindex="0"><code>docker run -it --rm --net=host ghcr.io/eclipse-kuksa/kuksa-python-sdk/kuksa-client:main grpc://127.0.0.1:55556
</code></pre><h3 id="docker-desktop-host-networking-not-supported">Docker desktop: Host networking not supported</h3>
<p>The examples above all used docker&rsquo;s <code>--net=host</code> option. That is quite convenient for development, as basically your containers &ldquo;share&rdquo; your hosts networking and there is no need for any port publishing.</p>
<p>However when using Docker Desktop on Mac OS or Windows, <a href="https://docs.docker.com/network/host/">host networking is not supported</a>.</p>
<p>One alternative is using a Docker distribution, that does support it even on Mac OS or Windows. <a href="https://rancherdesktop.io">Rancher Desktop</a> is an alternative that does.</p>
<p>With Docker Desktop you can still forward ports, so this should work:</p>
<pre tabindex="0"><code>docker run -it --rm  --publish 55556:55556 ghcr.io/eclipse/kuksa.val/databroker:master  --port 55556 --insecure
</code></pre><p>From your host computer you can now reach databroker at <code>127.0.0.1:55556</code>. To connect from another container, you need to use your computers IP address (<strong>not</strong> 127.0.0.1), i.e. to use the client</p>
<pre tabindex="0"><code>docker run -it --rm  -e KUKSA_DATA_BROKER_PORT=55556 -e KUKSA_DATA_BROKER_ADDR=&lt;YOUR_IP&gt; ghcr.io/eclipse/kuksa.val/databroker-cli:master
</code></pre><p>Recent versions of the databroker-cli also support command line arguments, so you can also write</p>
<pre tabindex="0"><code>docker run -it --rm   ghcr.io/eclipse/kuksa.val/databroker-cli:master  --server http://&lt;YOUR_IP&gt;:55556
</code></pre><h3 id="feedset-why-is-my-data-not-updated">feed/set: Why is my data not updated?</h3>
<p>Some VSS points are &ldquo;sensors&rdquo;, e.g. Vehicle.Speed. You can read/get Vehicle speed, but we are not expecting to be able to influence it via VSS.
Historically components, that gather the actual vehicle speed from some sensors/busses in a vehicle and providing a VSS representation to kuksa.val have been called <code>feeders</code>. Hence, to update the current speed in the Rust-cli, you use</p>
<pre tabindex="0"><code>feed Vehicle.Speed 200
</code></pre><p>while in the Python-cli you use</p>
<pre tabindex="0"><code>set Vehicle.Speed 200
</code></pre><p>The other thing, that VSS provides you are &ldquo;actuators&rdquo; <code>Vehicle.Body.Trunk.Rear.IsOpen</code>. The most important thing to remember about actuators: Every actuators is also a sensor, so everything written on top applies as well!
The second-most important thing is: For VSS actuatorss, it is expected that you might be able to influence the state of the real Vehicle by writing to them. So while being used as a sensor, you will get the current position of the Window in the example, you might also want to set the <em>desired</em> position.</p>
<p>You express this in the databroker-cli as</p>
<pre tabindex="0"><code>set Vehicle.Body.Trunk.Rear.IsOpen true
</code></pre><p>In kuksa-client cli you do</p>
<pre tabindex="0"><code>Test Client&gt; setValue -a  targetValue Vehicle.Body.Trunk.Rear.IsOpen True
</code></pre><p>In the code examples above you would do</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>client<span style="color:#f92672">.</span>set_target_values({
</span></span><span style="display:flex;"><span>        <span style="color:#e6db74">&#39;Vehicle.Body.Trunk.Rear.IsOpen&#39;</span>: Datapoint(<span style="color:#66d9ef">True</span>),
</span></span><span style="display:flex;"><span>    })
</span></span></code></pre></div><h3 id="all-i-see-is-python-shouldnt-this-be-high-performance">All I see is Python, shouldn&rsquo;t this be high-performance?</h3>
<p>Our Python library makes it easy to interact with databroker. While this is often sufficient for many applications, you are not limited by it: Databroker&rsquo;s native interface is based on GRPC, a high-performance GRPC framework. GRPC enables you to generate bindings for <em>any</em> language. Check the <a href="https://grpc.io">GRPC website</a> and take a look at the <a href="https://github.com/eclipse/kuksa.val/tree/master/proto/kuksa/val/v1">databroker interface definitions</a>.</p>

                        </div>

                    </div>

                </div>
                

            </div>
            

            
        </div>
        

        <footer id="footer">
    <div class="container">

        

        <div class="col-md-4 col-sm-6">

            

        </div>
        

        

    </div>
    
</footer>







<div id="copyright">
    <div class="container">
        <div class="col-md-12">
            
            <p class="pull-left">Copyright © 2018-2022 The Eclipse Foundation. All Rights Reserved.</p>
            
            <p class="pull-right">
              Template by <a href="https://bootstrapious.com/p/universal-business-e-commerce-template">Bootstrapious</a>.
              

              Ported to Hugo by <a href="https://github.com/devcows/hugo-universal-theme">DevCows</a>.
            </p>
        </div>
    </div>
</div>





    </div>
    

    
<script src="//code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/waypoints/4.0.1/jquery.waypoints.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/Counter-Up/1.0/jquery.counterup.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-parallax/1.1.3/jquery-parallax.js"></script>


<script src="/kuksa-website/js/front.js"></script>


<script src="/kuksa-website/js/owl.carousel.min.js"></script>



  </body>
</html>
